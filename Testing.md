Milestone Report
================
Introduction
------------
This study seeks to examine the usefulness of Joseph D. Piotroski’s F-Score which uses historical financial statement information to identify companies with superior performance as well as deploy it as a foundational base where other inputs can be modified to further improve on the original’s effectiveness.

Literature Review
-----------------

**Introduction to F-Score**

The F-score is a widely known performance/investment strategy due to its simplicity and accessibility. It uses public published information readily available for investor to separate strong performers from weak performers among high book-to-market firms. A score is computed based on 9 criteria categorized into 3 different groups and are summarized as follows:



|	|Profitability|
|:---:|:---:|
|1|Return on Assets	1 point if it is positive in the current year, 0 otherwise|
|2|	Operating Cash Flow	1 point if it is positive in the current year, 0 otherwise|
|3|	Change in Return of Assets (ROA)	1 point if ROA is higher in the current year compared to the previous one, 0 otherwise)|
|4|Accruals	1 point if Operating Cash Flow/Total Assets is higher than ROA in the current year, 0 otherwise|

| |Leverage, Liquidity and Source of Funds|
|:---:|:---:|
|5|	Change in Leverage (long-term) ratio	1 point if the ratio is lower this year compared to the previous one, 0 otherwise|
|6|	Change in Current ratio	1 point if it is higher in the current year compared to the previous one, 0 otherwise
|7|	Change in the number of shares	1 point if no new shares were issued during the last year

| |Operating Efficiency|
|:---:|:---:|
|8|	Change in Gross Margin	1 point if it is higher in the current year compared to the previous one, 0 otherwise
|9	|Change in Asset Turnover ratio	1 point if it is higher in the current year compared to the previous one, 0 otherwise


The total score is tabulated and companies are split into two main groups, High F-Score and Low F-Score. High F-Score consists of companies with score between 7-9, while low F-Score consists of companies with score between 1-3. Based on the grouping, an investor can make informed investment decisions (etc. holding companies' shares with high F-Score and short companies's shares with low F-Score).

**Relevancy of F-Score in Today’s Economy**

The empirical study of the F-Score is based on companies selected from 1976 and 1996. Since then, in the past 20 years, the overall economy landscape has experience massive seismic shifts; from multiple recessions (Dot.com bubble burst from 1997-2001, The Great Recession from 2007-2012) to the explosive growth of tech-based companies and slow-decline of manufacturing firms. Besides, there have been monumental changes to organization structure of companies, many opting for a more flat-based structure rather than a hierarchical one to cope with the ever-changing economy. This has in turn impact on how companies’ resources and finance are managed. 

While the aforementioned events may undermine the credibility of the F-Score, amongst the many changes, stronger financial regulations and corporate governance have been consistently implemented across the decades, aiming for higher financial reporting transparency and accountability. These developments have strengthened F-Score’s core idea of utilizing historical financial performance data to predict strong performers.  To name one, the enactment of the Sarbanes-Oxley Act also known the “Public Company Accounting Reform and Investor Protection Act in response to the financial scandal revolving Enron mandates strict reforms to improve financial disclosures from  corporations from possibly fraudulent activities. With better financial reporting, financial data provided from companies can be used more reliably for analytic purposes.

In conclusion, while recent economy changes may downplay F-Score’s usefulness, the stringent financial disclosures required from companies serves as an overarching foundation for F-Score due to its heavy reliance on such data. These circumstances serve as a strong motivation to reassess the credibility of the F-Score and modify the indicators accordingly if needed to suit the stance of today’s economy. 

**Applicability of F-Score**  

F-Score was originally intended to identify profitable returns from high book-to-market companies which are usually associated with financially distress firms. Therefore, the rationale behind each F-Score’s indicators serves to reflect the performance of such firms while taking their financial characteristics into account.

Using F-Score as a general tool for evaluating companies’ return regardless of their book-to-market value may prove to be not as effective. To assess the applicability of F-Score on all companies, F-Score indicators relevant specifically to high book-to-market companies should be discerned and their basis evaluated. 
After assessing each indicator, the F-Score Indicator “Change in Number of Shares” stands out as the sole indicator specifically to address high book-to-market companies. As noted from Joseph D. Piotroksi’s F-Score Paper:

>“….Financially distressed firms that raise external capital could be signalling their inability to generate sufficient internal funds to service future obligations. Moreover, the fact that these firms are willing to issue equity when their stock prices are likely to be depressed (i.e., high cost of capital) highlights the poor financial condition facing these firms”

While addressing the specific nature of a high book-to-market company, the change in number of shares can serve as a signalling indicator for other companies, if the Pecking Order Theory is taken into account.
The Pecking Order Theory states that for a company will raise its capital in the following order due to asymmetric information between the company’s manager and outsider investors: Internal funds, long-term debts and issuance of shares. The capital financing from these three sources provides different signalling to investors:- 

•	Using internal funds demonstrates a company’s capability to generate excess cash flow

•	Incurring long-term debts reflects a company’s earnings growth to outstrip the interest rates

•	Issuing share signals to investors that management believe that its shares are overvalued, thus taking advantage of the over-valuation


Thus, the increase in number of shares may also indeed serve as a negative indicator for all companies instead of specifically high book-to-market companies, albeit for differing reasons. Based on the assessment above, F-Score may serve as a valuable analysis tool for all companies.

Research Motivation
------------------
The aim of this research is to reinforce the notion that F-Score is still relevant as an investment tool today ass noted under the literature review.  In addition, F-Score’s effectiveness will also be evaluated under different scenarios. These are being tested under the following hypothesis:- 

**Hypothesis 1:**

Null: The difference between High F-Score and Low F-Score group’s market adjusted return = 0

Alternate:  The difference between High F-Score and Low F-Score group’s market adjusted return is not 0

*Explanation*: The hypothesis serves to evaluate F-Score general usefulness as an investment indicator by testing whether High F-Score companies have superior returns compared to Low F-Score companies.

**Hypothesis 2:**

Null: The High/Low grouping based on F-Score is consistent with the original F-Score grouping

Alternate: The High/Low grouping based on F-Score is not consistent with the original F-Score grouping

*Explanation*: The hypothesis serves to check whether there can be any positive adjustments made to the grouping (High/Low) of the F-Score such as incorporating/excluding certain scores in both groups.

**Hypothesis 3:**

Null: Changing increase in number of shares as a positive indicator yields greater returns (>Original F-Score)

Alternate: Changing increase in number of shares as a positive indicator yields lesser or no difference in returns (<=Original F-Score)

*Explanation*: The hypothesis serves to test the explanatory power of “Change in number of shares” Indicator, simultaneously assessing whether the Pecking Order Theory (refer to Literature Review) holds true.

**Hypothesis 4:**

Null: If Hypothesis 1 is null, the difference between High F-Score and Low F-Score group’s market adjusted return across different industries = 0
Alternate:  If Hypothesis 1 is null, the difference between High F-Score and Low F-Score group’s market adjusted return across different industries  is not 0

*Explanation*: The hypothesis serves to assess F-Score’s effectiveness and applicability for each specific sector.

**Hypothesis 5:**

Null: If Hypothesis 1 is null, all 3 groups to tabulate F-Score are significant independent factors in assessing returns
Alternate: If Hypothesis 1 is null, not all 3 groups to tabulate F-Score are significant independent factors in assessing returns

*Explanation*: The hypothesis serves to evaluate whether there are significant difference between the explanatory powers between the 3 groups of F-Score indicators.



Research Overview
-----------------
The overall research process is summarized in the flowchart as follows:

![](https://github.com/kohtseyoung/F-Score-Capstone-Project/blob/master/Images/Research%20Layout.png)

As seen from the table above, the main three data sources are from NASDAQ, Morning Star and Yahoo Finance. From these three data sources, the raw data files are company list, income statement, balance sheet, cash flow statement, key ratio share price and industry.  The raw data after processed by R are grouped into the following: F-Score Indicators, Grouping (High/Low) and Holding Return. Lastly, based on the results from the analysis of the processed data, it will provide evidence on whether following the hypotheses raised (Please refer to *Research Analysis* Section) can be confirm or falsify.

To organize the research process and its findings, the report is split into the following sections to further elaborate on each topic area:-

1.	Data Collection
2.	Data Wrangling
3.	Research Analysis

Data Collection
---------------
### Financial Information

The sample population of companies used is based from NASDAQ. There is a list of companies listed on NASDAQ available for download in excel format. The total number in the original list is 3288. For completeness of data, companies with insufficient information (etc. Market Cap = 0, no Sector/Industry information) are filtered out. Besides, we also removed companies that belong to the finance sector due to the uniqueness of its financial reporting standard for consistency purposes. The final sample population numbered to 2053.

For financial information that is required for F-Score testing, MorningStar is used due to the consistency in formatting of the relevant financial information. Besides, the extraction of information is relatively straightforward due to the structured format of its web links. The information extracted per company includes 4 data sets: “Income Statement”, “Balance Sheet”, “Cash Flow Statement” and “Key Ratios”. 

Due to the large number of companies’ information extracted, the function “try” and “sys.sleep” is used to ensure that all information is captured. Besides, a second run of extraction is performed if there are unusually large amount of missing values noted.

### Share Prices and Holding Returns

The R Package “Quantmod”, specifically its’ function “getSymbols” was used to extract companies’ share prices and holding returns from Yahoo Finance based on their respective symbols/tickers. Companies’ information are stored as objects named after companies’ symbols. Similarly to the extraction of information from MorningStar, some companies’ information are not available. The matter is resolved by creating a new environment to store these newly created objects. Under the assumption that no objects will be created if no data are available from Yahoo Finance, the function “ls” is used to list out the objects created in the new environment, and subsequently compared against the original company list used to identify companies with missing data. 
Instead of computing the returns from the share prices, the function “yearlyReturn” is used to extract the annual returns of each company. Furthermore, the function “adjustOHLC” is used in conjunction to readjust returns on share price based on stock-splits or reverse stock-splits during the period. 

### Data Collection Limitation & Biases

Data Collection is limited by broken links or unavailable data from each data source. 11 companies have been removed from the sample population due to no financial Information (8 companies) and no share price data (3 companies) available respectively from MorningStar and Yahoo Finance. 

Data Wrangling
--------------
### 1. Financial Information
The information from income statement, balance sheet and cash flow statement consist of 5 year data, while key ratio consists of 10 years of data. As a business cycle tend to be around 10 years, using 10 years’ worth of financial data would be helpful to show the usefulness of the model across an entire business cycle. It should be noted that 10 years’ worth of data would be computed into a 9 year series as some indicators rely on changes between two years, as such, the 1st year data cannot be computed solely by itself.

**F-Score Indicators**

Before diving head-in into the extraction of the respective indicators, only relevant and required information required for computational purposes are initially pulled from the respective financial data and stored as objects under R. This includes the following:  Net Income, Year End Assets, ROA, Operating Cash Flow, Long-term Debt Ratio, Current Ratio, Number of Shares, Gross Profit Margin and Sales.

**_Indicator 1 – Return on Assets (ROA)_**

ROA under F-Score and the ROA under Morning Star are computed differently. The former uses beginning year-end assets, while the latter using average assets as the denominator for computing ROA. F-Score and MorningStar’s ROA shall be coined as ROA(Beginning Assets) and ROA(Average Assets) respectively. As such, we are to re-compute the 1st 5 years ROA using information from the income statement and balance sheet data. For the last 5 years, the beginning of the year assets is recomputed based on the MorningStar’s ROA extracted from the key ratio statement. The formulas are as follows:

>Beginning Year Assets = Current Year Net Income/ROA(Average Assets) – Year End Assets

>ROA (Beginning Assets) = Current Year Net Income/ Beginning Year Assets

**_Indicator 2 – Operating Cash Flow (CFO)_**

Operating Cash Flow numerator data is obtained from the key ratio statement, which is subsequently divided by Beginning Year Assets as computed under the above section.

**_Indicator 3 – Change in ROA_**

Change in ROA is the difference between current year and past year ROA based on the computed ROA.  

**_Indicator 4 – Accruals_**

The difference between CFO and ROA as previously computed.


**_Indicator 5 – Change in Leverage (Long-Term) Ratio_**

There is a difference between the denominator of the leverage ratio between F-Score and MorningStar, the former being the average assets during the year, the latter being year-end assets.
The respective leverages shall be coined as Leverage (Average) and Leverage (Year-end) respectively.
The latest 5 years long-term debt is extracted from MorningStar’s balance sheet while the earliest 5 years are derived from the Leverage (Year-end) extracted from the key ratio statement. The formulas are as follows:

>Leverage (Average) = Leverage (Year-end)* Year-end Assets /100*Average Assets

>Change in Leverage is subsequently the difference between current year and past year Leverage (Average).

**_Indicator 6 – Change in Current Ratio_**

Current Ratio data is extracted from key ratio statement.  Change in current ratio is the difference between current year and past year current ratio

**_Indicator 7 – Change in Shares_**

Number of Shares data is extracted from key ratio statement.  Change in Shares is the difference between current year and past year Number of Shares.

**_Indicator 8 – Change in Gross Profit Margin_**

Gross profit margin data is extracted from key ratio statement.  Change in gross profit margin is the difference between current year and past year gross profit margin.

**_Indicator 9 – Change in Asset Turnover_**

Asset turnover is defined as total sales scaled by Beginning Year Assets. Sales are extracted from key ratio statement while Beginning Year Assets as computed as per above.  Change in asset turnover is the difference between current year and past year asset turnover.

### 2. Financial Fiscal Date Period

Having selected companies from a list under NASDAQ in 2017/2018, some of these companies would not have been publicly listed for the entire past 10 years since 2008. Therefore, the holding period of these companies would be based on public listed date up till 2017 or its delisted date, whichever earlier. Such information is gathered based on two fronts, from the availability of financial data and trading share price on MorningStar and Yahoo Finance respectively. Only under the circumstance that information is available from both sources for the same period, F-Score can be computed.

**Availability of Financial Information from MorningStar**

First, the companies’ entire fiscal period is identified from the “Margin % Sales” row under key ratio statement as seen below:

![](https://github.com/kohtseyoung/F-Score-Capstone-Project/blob/master/Images/Margin%25Sales.png)
 
Under the assumption that a company is not publicly-listed based if the company does not have any shares/equity, Number of Shares is used as an indicator to identify the company’s start and end date. First, the total sum for each year column without shares (etc. NA) is tabulated. Second, this sum is added to the first date as per above to acquire the start date. There is no needed to take end date/delisting date into account as using the list of companies extracted from NASDAQ in 2017/2018 already nullify this potential issue. 

**Availability of Trading Share Price from Yahoo Finance**

The extraction of earlier trading share price dates is similar to the above from MorningStar, except that it deals with rows data instead of columns.  A function is written to identify the earliest non-NA row for each company. The row number is then used to identify the specific dates using the “inner_join” function.

**Setting Starting Date by comparing and combining both data sets**

As both data sets (Financial Information and Share Price) are required, the later of the two dates is used as the companies’ starting date for testing.  However, it should be noted that the starting date, if based on trading share price is minus by 1, as the financial information prior to the trading share price date can be used to assess for F-Score.  The formula in R would be as follows:

>if_else(Financial Information Date > Trading Share Price Date , Financial Information, Trading Share Price Date -1))

### 3. Share Price and Returns

Data wrangling for share price is quite straight forward as data pulled from quantmod are clear and easy to use. The yearly holding returns extracted from quantmod are subsequently filtered using the Financial Fiscal Date Period as computed above. 
Besides, quarterly returns were used to compute returns from Q2 to the following year Q1, in order to take into account for information time lag. However, this return is currently not in-use for the current testing as early preliminary testing shows that yearly returns are more accurate.

### 4. Combining F-Score and Holding Returns

Combining F-Score and Holding Returns is relatively straightforward with the R package “dplyr”. To ensure that the companies’ shares are readily available for trades, an average daily trading volume of 10,000 is set as a basis for trade liquidity requirement. Holding returns with 0% are further filtered out as they represent trades inactivity.  Besides, holding returns above 200% are filtered out as outliers.   

Additional information is added such as industry/sector groupings for each company for more detailed testing. 

Research Analysis/Findings
--------------------------
### Hypothesis 1

Empirical results show that F-Score still maintains its effectiveness in identifying companies with superior returns from companies with subpar returns. The results are as follows:-

**Summary Data**

| Grouping   |	Holding Return |	Standard Deviation |	Sample Size |	Min |	Max    |	Q25      |	Q50     |	Q75    |
|:------------:|:----------------:|:--------------------:|:-------------:|:-----:|:--------:|:----------:|:---------:|:--------:|
|High_F.Score|	0.1913719      |	0.4403483          |	2850        |	-1	 |1.988738|	-0.07501	|0.138616	|0.408692|
|Low_F.Score |	0.04902	      |0.5887982	|927|	-1	|1.961359|	-0.34964	|-0.00344	|0.324751|
|Differences	|0.1423519	|-0.1484499|	1923|	0|	0.027379|	0.27462876|	0.14205453	|0.0839411|

**Plots**

|Violin Plot|Scatter Line Plot|
|:-------------------------:|:-------------------------:|
<img src="https://github.com/kohtseyoung/F-Score-Capstone-Project/blob/master/Images/Group%20Violin.png" widthF-="473" height="550" />  | <img src="https://github.com/kohtseyoung/F-Score-Capstone-Project/blob/master/Images/GG%20Group.png" width="473" height="550" />|

					
**Welch Two Sample t-test**		
 
|T |Df|P-value|		
|:-------------------------:|:-------------------------:|:-------------------------:|
|6.7708 |1279.8|1.946e-11|					

**Findings**

From the T-test performed, there is a signficant difference between High and Low F-Score holding returns at 95% confidence. Therefore, we can reject the null hypothesis. As seen from the summary data, High F-Score have an additional mean returns of 14% compared to Low F-Score companies. Besides, High F-Score companies also have lower returns volatilty compared to Low F-Score companies as inferred from the summary data and plots. 

There are more High F-Score companies in the sample as compared to Low F-Score is mainly due to the survivorship biases of the company list selected. As explained, this would positive skew the mean return of Low F-Score companies. It should be noted that despite the overstatement of returns of low F-Score companies, there is still a significant difference present (approx. 450%) between High and Low F-Score companies.

Therefore, companies with High F-Score possess higher returns and lower return volailty, transalting to lower investment risk as compared to companies with Low F-Score. 

### Hypothesis 2

Empirical results show that the original F-Score grouping can optionally include other F-Score to enchance returns. 

**Summary Data**

|F Score	|Holding_Return	|Std	|No. Samples	|Q25		|Q50		|Q75		|TukeyHD Test Grouping	|
|:-------------:|:-------------:|:-----:|:-------------:|:-------------:|:-------------:|:-------------:|:---------------------:|
|1	|-0.006647731	|0.6174855	|41		|-0.4125	|-0.02941176	|0.3948447	|a			|
|2	|0.022621788	|0.5455277	|215		|-0.34911824	|-0.005154639	|0.3318125	|a			|
|3	|0.060879898	|0.6006458	|671		|-0.34401515	|-0.002374894	|0.3174056	|a			|	
|4	|0.075679465	|0.5794739	|1402		|-0.30562691	|0.013423422	|0.3785532	|a			|
|5	|0.090042094	|0.5222998	|2094		|-0.23257775	|0.042982615	|0.3396489	|a			|
|6	|0.151246499	|0.4879108	|2133		|-0.13352859	|0.09880363	|0.3659083	|b			|
|7	|0.164036233	|0.4310036	|1652		|-0.10098112	|0.12584966	|0.3805613	|b			|
|8	|0.224432484	|0.4442882	|952		|-0.04909918	|0.15356031	|0.4398432	|b			|
|9	|0.247001731	|0.4737493	|246		|-0.01906319	|0.16189193	|0.4707094	|b			|

**Scatter Line Plot**

![Plot](https://github.com/kohtseyoung/F-Score-Capstone-Project/blob/master/Images/GG%20Base%20Line.png)

**Findings**

As seen from the data above, there is steady increase in mean returns across the F-Score. Additionally, it also should be noted from the summary table that that there is significant jump in returns between the following F-Scores: "2 -> 3", "5 -> 6", "7 -> 8". Focusing on these three significant increase, F-Score 3 higher returns is countered by its high return volality (2nd highest Standard Deviation). F-Score 6 shows to have both higher returns and lower return volatility compared to F-Score 5. F-Score 8 despite having higher returns, it also suffered from a slight increase in return volatity compared to F-Score 7. There is also a large decrease of return volality from F-Score 6 to F-Scocre 7 (0.487 to 0.431)

From the results of TukeyHD test, the 9 F-Scores can be split into two groups with significant difference, the Low F-Score group containing score 1-5 and High F-Score group containing score 6-9. This is consistent from the basic analysis of mean and standard deviation as F-Score 6 shows a significant improvement in returns and volatility as noted above. 

Comparing the results from above to the original F-Score groupings, it make sense to include F-Score 1-3 as Low F-Score Group due to both low returns and high return volality as seen from the table above. On the other hand, F-Score 7-9 as High F-Score is also a reasonable basis as despite the slight increase in return from F-Score 6 -7, there is a big drop in volatility as noted above. 

Therefore, although we can reject the null hypothesis as noted from the TukeyHD Test, the original F-Score grouping is still effective in grouping company with high and low returns seperately. However, investors can consider including other F-Scores into both groups, specifically 4-5 into Low F-Score and 6-7 into High F-Score in order to enchance returns, in spite of higher return volatilty. A suggestion to further perform analysis on the groupings is to use the financial tool, Sharpe Ratio to infer if the increase in volatility is a reasonbale trade of for higher returns. 


### Hypothesis 3

Empirical results show that changing F-Score indicator "Increase in number of shares" from a negative indicator to a positive indicator do not yield higher returns.

**Summary Data**

|F-Score	|High		|Std(High) 	|Low		| Std(Low)	|P-value	|Significant @95%|
|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|:-------------:|
|Original	|0.1913719	|0.4403483 	|0.04902	|0.5887982	|1.95E-11	|Yes		|
|Modified	|0.17850536	|0.4658419 	|0.08374978	|0.5456782	|4.75E-05	|Yes		|		
|Difference	|0.01286654	|		|-0.03472978	|		|		|		|	
